<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - ContainerHive</title>
    <link rel="stylesheet" href="icons.css" />
    <link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="site.css" />
    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
    <script>
        class Project {
            constructor(id, name, desc, deploy, webhook = true) {
                this.ProjectId = id; 
                this.Name = name;
                this.Description = desc;
                this.LastUpdated = new Date();
                this.WebhookActive = webhook;
                this.Deployments=deploy
                this.ApiToken = "asdawdwdadsdwd"
                this.Repo = { Url: "https://github.com/AlexMiHa/TestRepo.lel", Branch: "main"};
            }
        }
        class Deployment {
            constructor(id, dockerpath) {
                this.DeploymentId = id;
                this.DockerPath = dockerpath;
                this.HostPort = 80;
                this.EnvironmentPort = 3000;

                this.EnvironmentVars = [{Key:"SECRET", Value:"Lel"}, {Key:"Test", Value:"Test1Value"}];
                this.Mounts = [{HostPath:"/content", EnvironmentPath:"/env/content"}, {HostPath: "/keys", EnvironmentPath: "/val/keys"}];
            }
        }
        const proj = new Project(0, "TestProj0", "Lorem ipsum dolor sit amet example description lel was geht ab bro.");

        $(() => {
        });

        function addKeyValuePair(elementId) {
            const list = document.getElementById(elementId);
            const item = document.createElement('li');

            const keyInput = document.createElement('input')
            keyInput.type = 'text';
            keyInput.placeholder = 'Key';
            keyInput.required = true;

            const valueInput = document.createElement('input')
            valueInput.type = 'text';
            valueInput.placeholder = 'Value';
            valueInput.required = true;

            const deleteButton = document.createElement('button');
            deleteButton.classList = "button small";
            deleteButton.tabIndex = -1;
            deleteButton.textContent = 'X';
            deleteButton.type='button';
            deleteButton.onclick = function() {
                list.removeChild(item);
            };

            item.appendChild(keyInput);
            item.appendChild(document.createTextNode(': '));
            item.appendChild(valueInput);
            item.appendChild(deleteButton);
            list.appendChild(item);
        }
        </script>
</head>
<body>
    <article id="main-container">
        <div class="head">
            <h1 class="title gold-highlight">@Model.Name</h1>
        </div>
        <div class="content">
            <form class="deployment-edit">
                <div class="deployment-edit-content">
                    <div class="did-floating-label-content">
                        <input class="did-floating-input" type="text" placeholder=" " maxlength="512" autocomplete="off" name="dockerpath" required pattern='^(?:\.\.?(?:/[^\n""?:*<>|]+)*/)?Dockerfile$' />
                        <label class="did-floating-label">Dockerpath*</label>
                        <span class="subtitle">This should be a relative Path, rooted at the root of the Project repo.</span>
                    </div>
                    <div class="did-floating-label-content short-input">
                        <input class="did-floating-input" type="number" max="65535" min="0" placeholder=" " autocomplete="off" name="hostPort" required/>
                        <label class="did-floating-label">Host Port*</label>
                    </div>
                    <div class="did-floating-label-content short-input">
                        <input class="did-floating-input" type="number" max="65535" min="0" placeholder=" " autocomplete="off" name="environmentPort" required/>
                        <label class="did-floating-label">Environment Port*</label>
                    </div>
                    <div class="flex-breaker"></div>
                    <div class="key-value-component" id="key-value-environment">
                        <h3 class="blue-highlight">Environment Vars</h3>
                        <button type="button" class="button" onclick="addKeyValuePair('envKeyValueList')">Add Key-Value Pair</button>
                        <ul id="envKeyValueList"></ul>
                    </div>
                    <div class="key-value-component" id="key-value-mounts">
                        <h3 class="orange-highlight">Mounts</h3>
                        <button type="button" class="button" onclick="addKeyValuePair('mountKeyValueList')">Add Key-Value Pair</button>
                        <ul id="mountKeyValueList"></ul>
                    </div>

                </div>
                <div class="deployment-edit-actions">
                    <button class="button button-red-highlight">Cancel</button>
                    <button class="button button-green-highlight">Save</button>
                </div>
            </form>
        </div>
    </article>
</body>
</html>